(this["webpackJsonpsafe-react"]=this["webpackJsonpsafe-react"]||[]).push([[51],{2293:function(e,a,t){"use strict";t.d(a,"a",(function(){return d}));var n=t(35),r=t(356),c=t(0),s=t(2285),o=t.n(s),l=t(2288),i=t(103),m=Object(r.a)({qrCodeBtn:{cursor:"pointer"}}),d=function(e){var a=e.handleScan,t=m(),r=Object(c.useState)(!1),s=Object(n.a)(r,2),d=s[0],u=s[1],f=function(){u(!1)};return c.createElement(c.Fragment,null,c.createElement(i.a,{alt:"Scan QR",className:t.qrCodeBtn,height:20,onClick:function(){u(!0)},role:"button",src:o.a,testId:"qr-icon"}),d&&c.createElement(l.a,{isOpen:d,onClose:f,onScan:function(e){a(e,f)}}))}},2990:function(e,a,t){"use strict";t.r(a),t.d(a,"loadSafe",(function(){return Oe}));var n=t(1),r=t.n(n),c=t(4),s=t(0),o=t.n(s),l=t(40),i=t(12),m=t(35),d=t(357),u=t(2492),f=t.n(u),p=t(2600),g=t(132),E=t(2294),b=t(97),h=t(675),x=t(356),w=t(2491),O=t.n(w),v=t(2293),j=t(2335),y=t(2305),N=t(2271),S=t(2274),k=t(629),A=t(120),z=t(69),M=t(200),C=t(24),R=t(3),I=Object(x.a)({root:{display:"flex",maxWidth:"460px",marginTop:"12px"},check:{color:"#03AE60",height:"20px"},links:{"&>a":{color:R.secondary}}}),F=function(){var e=Object(c.a)(r.a.mark((function e(a){var t,n,c,s,o,l,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={},n=Object(C.h)(),(c=a.address)&&void 0===Object(k.f)(c)){e.next=5;break}return e.abrupt("return",t);case 5:return e.next=7,Object(M.k)(c);case 7:if(e.sent){e.next=11;break}return t.address="Address given is not a Safe instance",e.abrupt("return",t);case 11:return e.next=13,n.eth.getStorageAt(c,0);case 13:return s=e.sent,o=n.utils.toChecksumAddress("0x".concat(s.substr(s.length-40))),e.next=17,Object(M.i)();case 17:return l=e.sent,i=l.options.address,o===i||o===M.d||(t.address="Address is not a Safe or mastercopy is not supported"),e.abrupt("return",t);case 22:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),L=function(e){var a=e.errors,t=e.form,n=I();return s.createElement(s.Fragment,null,s.createElement(g.a,{margin:"md"},s.createElement(z.a,{color:"primary",noMargin:!0,size:"md"},"You are about to load an existing Gnosis Safe. First, choose a name and enter the Safe address. The name is only stored locally and will never be shared with Gnosis or any third parties.",s.createElement("br",null),"Your connected wallet does not have to be the owner of this Safe. In this case, the interface will provide you a read-only view.")),s.createElement(g.a,{className:n.root},s.createElement(A.a,{xs:11},s.createElement(N.a,{component:S.a,name:"name",placeholder:"Name of the Safe",text:"Safe name",type:"text",validate:Object(k.a)(k.k,Object(k.d)(1,50)),testId:"load-safe-name-field"}))),s.createElement(g.a,{className:n.root,margin:"lg"},s.createElement(A.a,{xs:11},s.createElement(y.a,{fieldMutator:function(e){t.mutators.setValue("address",e)},inputAdornment:Object(k.j)("address",a)&&{endAdornment:s.createElement(h.a,{position:"end"},s.createElement(O.a,{className:n.check,"data-testid":"valid-address"}))},name:"address",placeholder:"Safe Address*",text:"Safe Address",testId:"load-safe-address-field"})),s.createElement(A.a,{center:"xs",className:n,middle:"xs",xs:1},s.createElement(v.a,{handleScan:function(e,a){t.mutators.setValue("address",e),a()}}))),s.createElement(g.a,{margin:"sm"},s.createElement(z.a,{className:n.links,color:"primary",noMargin:!0,size:"md"},"By continuing you consent to the"," ",s.createElement("a",{href:"https://gnosis-safe.io/terms",rel:"noopener noreferrer",target:"_blank"},"terms of use")," ","and"," ",s.createElement("a",{href:"https://gnosis-safe.io/privacy",rel:"noopener noreferrer",target:"_blank"},"privacy policy"),".")))},B=function(){return function(e,a){var t=a.errors,n=a.form;return s.createElement(s.Fragment,null,s.createElement(j.a,{controls:e},s.createElement(L,{errors:t,form:n})))}},W=t(16),T=t(678),V=t(632),q=t(631),D=t(138),P=t(633),J=t(201),U=t(2336),Y=t(6),G=t(601),_=Object(G.a)({details:{padding:R.lg,borderRight:"solid 1px ".concat(R.border),height:"100%"},owners:{display:"flex",justifyContent:"flex-start"},ownerName:Object(Y.a)({marginBottom:"15px",minWidth:"100%"},"@media (min-width: ".concat(R.screenSm,"px)"),{marginBottom:"0",minWidth:"0"}),ownerAddresses:{alignItems:"center",marginLeft:"".concat(R.sm)},address:{paddingLeft:"6px",marginRight:R.sm},open:{paddingLeft:R.sm,width:"auto","&:hover":{cursor:"pointer"}},title:{padding:"".concat(R.md," ").concat(R.lg)},owner:{padding:"0 ".concat(R.lg),marginBottom:"12px"},header:{padding:"".concat(R.sm," ").concat(R.lg),color:R.disabled,fontSize:R.extraSmallFontSize},name:{marginRight:"".concat(R.sm)}}),H=t(22),Q=t(30),K=function(e,a,t){for(var n=Object(W.a)({},t),r=0;r<e.length;r+=1)n[Object(U.f)(r)]=e[r];return n.threshold=a,n},X=Object(x.a)(_),Z=function(e){var a=Object(s.useState)([]),t=Object(m.a)(a,2),n=t[0],i=t[1],d=X(),u=e.updateInitialProps,f=e.values,p=function(e){var a=Object(l.f)(P.b);return Object(J.c)(a,e)}(n);return Object(s.useEffect)((function(){var e=!0;return function(){var a=Object(c.a)(r.a.mark((function a(){var t,n,c,s,o,l;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=f.address,a.next=3,Object(M.g)(t);case 3:return n=a.sent,a.next=6,n.methods.getOwners().call();case 6:return c=a.sent,a.next=9,n.methods.getThreshold().call();case 9:s=a.sent,e&&(o=c.slice().sort(),l=K(o,s,f),u(l),i(o));case 11:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}()(),function(){e=!1}}),[u,f]),o.a.createElement(o.a.Fragment,null,o.a.createElement(g.a,{className:d.title},o.a.createElement(z.a,{color:"primary",noMargin:!0,size:"md","data-testid":"load-safe-step-two"},"This Safe has ".concat(n.length," owners. Optional: Provide a name for each owner."))),o.a.createElement(D.a,null),o.a.createElement(T.a,null,o.a.createElement(b.a,{className:d.header},o.a.createElement(A.a,{xs:4},"NAME"),o.a.createElement(A.a,{xs:8},"ADDRESS")),o.a.createElement(D.a,null),o.a.createElement(g.a,{margin:"md",padding:"md"},p.map((function(e,a){var t=e.address,n=e.name||"Owner #".concat(a+1);return o.a.createElement(b.a,{className:d.owner,key:t,"data-testid":"owner-row"},o.a.createElement(A.a,{className:d.ownerName,xs:4},o.a.createElement(N.a,{className:d.name,component:S.a,initialValue:n,name:Object(U.g)(a),placeholder:"Owner Name*",text:"Owner Name",type:"text",validate:Object(k.a)(k.k,Object(k.d)(1,50)),testId:"load-safe-owner-name-".concat(a)})),o.a.createElement(A.a,{xs:8},o.a.createElement(b.a,{className:d.ownerAddresses},o.a.createElement(q.a,{address:t,diameter:32}),o.a.createElement(z.a,{className:d.address,color:"disabled",noMargin:!0,size:"md"},t),o.a.createElement(V.a,{content:t}),o.a.createElement(Q.ExplorerButton,{explorerUrl:Object(H.b)(t)}))))})))))},$=function(e,a){var t=e.updateInitialProps;return function(e,n){var r=n.values;return o.a.createElement(o.a.Fragment,null,o.a.createElement(j.a,{controls:e,padding:!1},o.a.createElement(Z,{network:a,updateInitialProps:t,values:r})))}},ee=t(76),ae=t.n(ee),te=t(42),ne=t(2352),re=Object(x.a)({root:Object(Y.a)({flexDirection:"column",minHeight:"300px"},"@media (min-width: ".concat(R.screenSm,"px)"),{flexDirection:"row"}),detailsColumn:Object(Y.a)({minWidth:"100%"},"@media (min-width: ".concat(R.screenSm,"px)"),{minWidth:"0"}),ownersColumn:Object(Y.a)({minWidth:"100%"},"@media (min-width: ".concat(R.screenSm,"px)"),{minWidth:"0"}),details:{padding:R.lg,borderRight:"solid 1px ".concat(R.border),height:"100%"},owners:{padding:R.lg},name:{textOverflow:"ellipsis",overflow:"hidden"},userName:{whiteSpace:"nowrap"},owner:{alignItems:"center",minWidth:"fit-content",padding:R.sm,paddingLeft:R.lg},user:{justifyContent:"left","& > p":{marginRight:R.sm}},open:{paddingLeft:R.sm,width:"auto","&:hover":{cursor:"pointer"}},container:{marginTop:R.xs,alignItems:"center"},address:{paddingLeft:"6px",marginRight:R.sm}}),ce=function(e){var a=e.userAddress,t=e.values,n=re(),r=function(e,a){for(var t=!1,n=0;n<Object(U.e)(e);n+=1)if(e[Object(U.f)(n)]===a){t=!0;break}return t}(t,a),c=Object(ne.a)(t),s=t.address;return o.a.createElement(o.a.Fragment,null,o.a.createElement(b.a,{className:n.root},o.a.createElement(A.a,{className:n.detailsColumn,layout:"column",xs:4},o.a.createElement(g.a,{className:n.details},o.a.createElement(g.a,{margin:"lg"},o.a.createElement(z.a,{color:"primary",noMargin:!0,size:"lg","data-testid":"load-safe-step-three"},"Review details")),o.a.createElement(g.a,{margin:"lg"},o.a.createElement(z.a,{color:"disabled",noMargin:!0,size:"sm"},"Name of the Safe"),o.a.createElement(z.a,{className:n.name,color:"primary",noMargin:!0,size:"lg",weight:"bolder","data-testid":"load-form-review-safe-name"},t.name)),o.a.createElement(g.a,{margin:"lg"},o.a.createElement(z.a,{color:"disabled",noMargin:!0,size:"sm"},"Safe address"),o.a.createElement(b.a,{className:n.container},o.a.createElement(q.a,{address:s,diameter:32}),o.a.createElement(z.a,{className:n.address,color:"disabled",noMargin:!0,size:"md"},Object(te.f)(s,4)),o.a.createElement(V.a,{content:s}),o.a.createElement(Q.ExplorerButton,{explorerUrl:Object(H.b)(s)}))),o.a.createElement(g.a,{margin:"lg"},o.a.createElement(z.a,{color:"disabled",noMargin:!0,size:"sm"},"Connected wallet client is owner?"),o.a.createElement(z.a,{className:n.name,color:"primary",noMargin:!0,size:"lg",weight:"bolder"},r?"Yes":"No (read-only)")),o.a.createElement(g.a,{margin:"lg"},o.a.createElement(z.a,{color:"disabled",noMargin:!0,size:"sm"},"Any transaction requires the confirmation of:"),o.a.createElement(z.a,{className:n.name,color:"primary",noMargin:!0,size:"lg",weight:"bolder"},"".concat(t.threshold," out of ").concat(Object(U.e)(t)," owners"))))),o.a.createElement(A.a,{className:n.ownersColumn,layout:"column",xs:8},o.a.createElement(T.a,null,o.a.createElement(g.a,{className:n.owners},o.a.createElement(z.a,{color:"primary",noMargin:!0,size:"lg"},"".concat(Object(U.e)(t)," Safe owners"))),o.a.createElement(D.a,null),c.map((function(e,a){return o.a.createElement(o.a.Fragment,null,o.a.createElement(b.a,{className:n.owner},o.a.createElement(A.a,{align:"center",xs:1},o.a.createElement(q.a,{address:e,diameter:32})),o.a.createElement(A.a,{xs:11},o.a.createElement(g.a,{className:ae()(n.name,n.userName)},o.a.createElement(z.a,{noMargin:!0,size:"lg","data-testid":"load-safe-review-owner-name"},t[Object(U.g)(a)]),o.a.createElement(g.a,{className:n.user,justify:"center"},o.a.createElement(z.a,{color:"disabled",noMargin:!0,size:"md"},e),o.a.createElement(V.a,{content:e}),o.a.createElement(Q.ExplorerButton,{explorerUrl:Object(H.b)(e)}))))),a!==c.length-1&&o.a.createElement(D.a,null))}))))))},se=function(e){var a=e.userAddress;return function(e,t){var n=t.values;return o.a.createElement(o.a.Fragment,null,o.a.createElement(j.a,{controls:e,padding:!1},o.a.createElement(ce,{userAddress:a,values:n})))}},oe=t(82),le=["Name and address","Owners","Review"],ie=["Next","Review","Load"],me={color:R.secondary,padding:R.sm,marginRight:"5px"},de=function(){oe.a.goBack()},ue={setValue:function(e,a,t){var n=Object(m.a)(e,2),r=n[0],c=n[1];(0,t.changeValue)(a,r,(function(){return c}))}},fe=function(e){var a=e.network,t=e.onLoadSafeSubmit,n=e.provider,r=e.userAddress;return s.createElement(s.Fragment,null,n?s.createElement(g.a,null,s.createElement(b.a,{align:"center"},s.createElement(d.a,{disableRipple:!0,onClick:de,style:me},s.createElement(f.a,null)),s.createElement(E.a,{tag:"h2"},"Load existing Safe")),s.createElement(p.b,{buttonLabels:ie,mutators:ue,onSubmit:t,steps:le,testId:"load-safe-form"},s.createElement(p.a,{validate:F,component:B}),s.createElement(p.a,{network:a,component:$}),s.createElement(p.a,{network:a,userAddress:r,component:se}))):s.createElement("div",null,"No account detected"))},pe=t(647),ge=t(166),Ee=t(80),be=t(381),he=t(59),xe=t(141),we=t(162),Oe=function(){var e=Object(c.a)(r.a.mark((function e(a,t,n,c){var s,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(be.a)(t,a);case 2:return(s=e.sent).owners=n,e.next=6,Object(ge.e)();case 6:if(e.t0=e.sent,e.t0){e.next=9;break}e.t0={};case 9:return(o=e.t0)[t]=s,e.next=13,Object(ge.g)(o);case 13:return e.next=15,c(s);case 15:case"end":return e.stop()}}),e)})));return function(a,t,n,r){return e.apply(this,arguments)}}();a.default=function(){var e=Object(l.e)(),a=Object(l.f)(xe.d),t=Object(l.f)(xe.c),n=Object(l.f)(xe.f),o=function(){var a=Object(c.a)(r.a.mark((function a(t){return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e(Object(we.b)(t));case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),m=function(){var e=Object(c.a)(r.a.mark((function e(a){var t,n,c,s,l,i,m;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.address){e.next=4;break}return console.error("failed to load Safe address",JSON.stringify(a)),e.abrupt("return");case 4:return e.prev=4,n=a.name,t=Object(he.a)(t),c=Object(ne.b)(a),s=Object(M.g)(t),e.next=11,s.methods.getOwners().call();case 11:return l=e.sent,i=Object(ne.c)(c,l.slice().sort()),e.next=15,Oe(n,t,i,o);case 15:m="".concat(Ee.c,"/").concat(t,"/balances"),oe.a.push(m),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(4),console.error("Error while loading the Safe",e.t0);case 22:case"end":return e.stop()}}),e,null,[[4,19]])})));return function(a){return e.apply(this,arguments)}}();return s.createElement(pe.a,null,s.createElement(fe,{onLoadSafeSubmit:m,network:i.a[t],userAddress:n,provider:a}))}}}]);
//# sourceMappingURL=51.e677dd4e.chunk.js.map