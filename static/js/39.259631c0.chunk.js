(this["webpackJsonpsafe-react"]=this["webpackJsonpsafe-react"]||[]).push([[39],{2271:function(e,t,n){"use strict";var a=n(0),r=n(2270);t.a=function(e){var t=Object.assign({},e);return a.createElement(r.a,t)}},2276:function(e,t,n){"use strict";var a=n(71),r=n(0),i=n(2270),c=function(e){return{padding:"0 ".concat(e,"%"),flexDirection:"column",flex:"1 0 auto"}};t.a=function(e){var t=e.children,n=e.decorators,o=e.formMutators,u=e.initialValues,l=e.onSubmit,s=e.padding,d=void 0===s?0:s,f=e.subscription,m=e.testId,p=void 0===m?"":m,b=e.validation;return r.createElement(i.b,{decorators:n,initialValues:u,mutators:o,onSubmit:l,render:function(e){var n=e.handleSubmit,i=Object(a.a)(e,["handleSubmit"]);return r.createElement("form",{"data-testid":p,onSubmit:n,style:c(d)},t(i.submitting,i.validating,i,i.form.mutators))},subscription:f,validate:b})}},2279:function(e,t,n){"use strict";var a=n(39),r=n(0),i=n.n(r),c=n(22),o=n(632),u=n(631),l=n(132),s=n(2273),d=n(69),f=n(3),m=n(36),p=n(30);function b(){var e=Object(a.a)(["\n  font-size: 12px;\n  line-height: 1.08;\n  letter-spacing: -0.5;\n  background-color: ",";\n  width: fit-content;\n  padding: 5px 10px;\n  margin-top: ",";\n  border-radius: 3px;\n"]);return b=function(){return e},e}function v(){var e=Object(a.a)(["\n  display: flex;\n  align-items: center;\n\n  .icon-section {\n    margin-right: 10px;\n  }\n\n  .data-section {\n    display: flex;\n    flex-direction: column;\n\n    .address {\n      display: flex;\n    }\n  }\n"]);return v=function(){return e},e}var g=m.default.div(v()),E=Object(m.default)(l.a)(b(),f.border,f.xs),h=Object(c.i)().nativeCoin;t.a=function(e){var t=e.ethBalance,n=e.safeAddress,a=e.safeName;return i.a.createElement(g,null,i.a.createElement("div",{className:"icon-section"},i.a.createElement(u.a,{address:n,diameter:32})),i.a.createElement("div",{className:"data-section"},a&&i.a.createElement(d.a,{noMargin:!0,weight:"bolder"},a),i.a.createElement("div",{className:"address"},i.a.createElement(d.a,{noMargin:!0,weight:"bolder"},n),i.a.createElement(o.a,{content:n}),i.a.createElement(p.ExplorerButton,{explorerUrl:Object(c.b)(n)})),t&&i.a.createElement(E,null,i.a.createElement(d.a,{noMargin:!0},"Balance: ",i.a.createElement(s.a,{"data-testid":"current-eth-balance"},"".concat(t," ").concat(h.symbol))))))}},2482:function(e,t,n){"use strict";var a=n(39),r=n(0),i=n.n(r),c=n(36),o=n(2483),u=n.n(o),l=n(138),s=n(3);function d(){var e=Object(a.a)(["\n  display: flex;\n  align-items: center;\n  margin: "," 0;\n\n  img {\n    margin: 0 ",";\n  }\n"]);return d=function(){return e},e}var f=c.default.div(d(),s.md,s.sm);t.a=function(e){var t=e.withArrow;return i.a.createElement(f,null,t&&i.a.createElement("img",{alt:"Arrow Down",src:u.a}),i.a.createElement(l.a,null))}},2483:function(e,t,n){e.exports=n.p+"static/media/arrow-down.960a6373.svg"},2484:function(e,t,n){"use strict";var a=n(35),r=n(39),i=n(683),c=n(357),o=n(648),u=n.n(o),l=n(649),s=n.n(l),d=n(0),f=n.n(d),m=n(36);function p(){var e=Object(r.a)(["\n  display: flex;\n  align-items: center;\n"]);return p=function(){return e},e}function b(){var e=Object(r.a)([""]);return b=function(){return e},e}function v(){var e=Object(r.a)([""]);return v=function(){return e},e}function g(){var e=Object(r.a)([""]);return g=function(){return e},e}var E=m.default.div(g()),h=m.default.div(v()),O=m.default.div(b()),j=m.default.div(p());t.a=function(e){var t=e.children,n=e.description,r=void 0===n?null:n,o=e.title,l=e.collapseClassName,d=e.headerWrapperClassName,m=f.a.useState(!1),p=Object(a.a)(m,2),b=p[0],v=p[1];return f.a.createElement(E,null,f.a.createElement(h,{className:d,onClick:function(){v(!b)}},f.a.createElement(O,null,o),f.a.createElement(j,null,f.a.createElement(c.a,{disableRipple:!0,size:"small"},b?f.a.createElement(u.a,null):f.a.createElement(s.a,null)),r)),f.a.createElement(i.a,{in:b,timeout:"auto",unmountOnExit:!0,className:l},t))}},2988:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"Wrapper",(function(){return pe})),n.d(a,"Nav",(function(){return be})),n.d(a,"Menu",(function(){return ve})),n.d(a,"Content",(function(){return ge})),n.d(a,"Footer",(function(){return Ee}));var r=n(35),i=n(39),c=n(0),o=n.n(c),u=n(2596),l=n(30),s=n(40),d=n(36),f=n(16),m=n(657),p=n.n(m),b=n(2270),v=n(629),g=n(2271);function E(){var e=Object(i.a)(["\n  margin: 0;\n"]);return E=function(){return e},e}var h=Object(d.default)(l.Checkbox)(E()),O=function(){var e=Object(b.f)({subscription:{visited:!0}}).visited,t=(null===e||void 0===e?void 0:e.agreementAccepted)?v.k:void 0;return o.a.createElement(g.a,{component:h,label:o.a.createElement(l.Text,{size:"xl"},"This app is not a Gnosis product and I agree to use this app",o.a.createElement("br",null),"at my own risk."),name:"agreementAccepted",type:"checkbox",validate:t})},j=n(1),x=n.n(j),w=n(4),S=n(2317),A=n(322),k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["https:","http:"];try{var n=new URL(e);return t.includes(n.protocol)}catch(a){return!1}},y=n(42),T=n(2955),C=n.n(T),I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return Object(c.useCallback)(C()(e,t,n),[e,t,n])},N=function(e){return k(e)?void 0:"Invalid URL"},R=Object(S.a)({field:"appUrl",updates:{appUrl:function(){var e=Object(w.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=!k(t)&&Object(y.d)(t),!e.t0){e.next=5;break}return e.next=4,Object(A.c)(t);case 4:e.t0=e.sent;case 5:if(!(n=e.t0)){e.next=8;break}return e.abrupt("return",n);case 8:return e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),L=function(e){var t=e.onAppInfo,n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,a=Object(c.useRef)(e),i=Object(c.useState)(e),o=Object(r.a)(i,2),u=o[0],l=o[1],s=I((function(e){return l(e)}),t,n);return Object(c.useEffect)((function(){if(e!==a.current)return s(e),a.current=e,s.cancel}),[s,e]),u}(Object(b.d)("appUrl",{subscription:{value:!0}}).input.value,500);return o.a.useEffect((function(){var e=function(){var e=Object(w.a)(x.a.mark((function e(){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(A.b)(n);case 2:a=e.sent,t(Object(f.a)({},a));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();k(n)&&e()}),[n,t]),null},_=function(e){var t=e.appList,n=Object(b.f)({subscription:{visited:!0}}).visited,a=(null===n||void 0===n?void 0:n.appUrl)?Object(v.a)(v.k,N,Object(A.f)(t)):void 0;return o.a.createElement(g.a,{label:"App URL",name:"appUrl",placeholder:"App URL",type:"text",component:l.TextField,validate:a})},D=function(e){var t=e.appInfo,n=e.onSubmitButtonStatusChange,a=Object(b.f)({subscription:{valid:!0,validating:!0,visited:!0}}),r=a.valid,i=a.validating,c=a.visited;return o.a.useEffect((function(){var e=(null===c||void 0===c?void 0:c.agreementAccepted)&&c.appUrl;n(i||!r||!e||!Object(A.d)(t))}),[i,r,c,n,t]),null},M=n(2276),F=n(103);function G(){var e=Object(i.a)(["\n  margin: 36px 0 24px 0;\n\n  img {\n    margin-right: 10px;\n  }\n"]);return G=function(){return e},e}function P(){var e=Object(i.a)(["\n  && {\n    width: 335px;\n  }\n"]);return P=function(){return e},e}function U(){var e=Object(i.a)(["\n  margin-bottom: 19px;\n"]);return U=function(){return e},e}var z=Object(d.default)(l.Text)(U()),B=Object(d.default)(l.TextField)(P()),K=d.default.div(G()),W={appUrl:"",agreementAccepted:!1},q={id:"",url:"",name:"",iconUrl:p.a,error:!1,description:""},V=function(e){var t=e.appList,n=e.closeModal,a=e.formId,i=e.onAppAdded,c=e.setIsSubmitDisabled,u=o.a.useState(q),l=Object(r.a)(u,2),s=l[0],d=l[1];return o.a.createElement(M.a,{decorators:[R],initialValues:W,onSubmit:function(){n(),i(s)},testId:a},(function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(z,{size:"xl"},"Add custom app"),o.a.createElement(_,{appList:t}),o.a.createElement(L,{onAppInfo:d}),o.a.createElement(K,null,o.a.createElement(F.a,{alt:"Token image",height:55,src:s.iconUrl}),o.a.createElement(B,{label:"App name",readOnly:!0,value:s.name,onChange:function(){}})),o.a.createElement(O,null),o.a.createElement(D,{onSubmitButtonStatusChange:c,appInfo:s}))}))},Y=function(e){var t=e.appList,n=e.onAppAdded,a=e.onAppToggle,i=e.onAppRemoved,u=Object(c.useState)(!1),s=Object(r.a)(u,2),d=s[0],m=s[1],b=Object(c.useState)(!0),v=Object(r.a)(b,2),g=v[0],E=v[1],h=function(){return m(!1)},O=o.a.createElement(V,{formId:"add-apps-form",appList:t,closeModal:h,onAppAdded:n,setIsSubmitDisabled:E});return o.a.createElement(o.a.Fragment,null,o.a.createElement(l.ButtonLink,{color:"primary",onClick:function(){return m(!d)}},"Manage Apps"),d&&o.a.createElement(l.ManageListModal,{addButtonLabel:"Add custom app",showDeleteButton:!0,defaultIconUrl:p.a,formBody:O,isSubmitFormDisabled:g,itemList:t.map((function(e){return Object(f.a)(Object(f.a)({},e),{},{checked:!e.disabled})})),onClose:h,onItemToggle:function(e,t){a(e,t)},onItemDeleted:i,onSubmitForm:function(){document.querySelectorAll("[data-testId=".concat("add-apps-form","]"))[0].dispatchEvent(new Event("submit",{cancelable:!0}))}}))},J=n(70),H=n(80),X=n(61),Z=function(e){var t=e.onCancel,n=e.onConfirm;return o.a.createElement(l.FixedDialog,{body:o.a.createElement(o.a.Fragment,null,o.a.createElement(l.Text,{size:"md"},"You are now accessing third-party apps, which we do not own, control, maintain or audit. We are not liable for any loss you may suffer in connection with interacting with the apps, which is at your own risk. You must read our Terms, which contain more detailed provisions binding on you relating to the apps."),o.a.createElement("br",null),o.a.createElement(l.Text,{size:"md"},"I have read and understood the"," ",o.a.createElement("a",{href:"https://gnosis-safe.io/terms",rel:"noopener noreferrer",target:"_blank"},"Terms")," ","and this Disclaimer, and agree to be bound by them.")),onCancel:t,onConfirm:n,title:"Disclaimer"})};function $(){var e=Object(i.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n"]);return $=function(){return e},e}function Q(){var e=Object(i.a)(["\n  position: relative;\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n"]);return Q=function(){return e},e}function ee(){var e=Object(i.a)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]);return ee=function(){return e},e}function te(){var e=Object(i.a)(["\n  padding: 15px;\n  box-sizing: border-box;\n  width: 100%;\n  height: 100%;\n"]);return te=function(){return e},e}var ne=d.default.iframe(te()),ae=d.default.div(ee()),re=d.default.div(Q()),ie=d.default.div($()),ce=Object(c.forwardRef)((function(e,t){var n=e.selectedApp,a=e.safeAddress,i=e.network,u=e.appIsLoading,s=e.granted,d=e.onIframeLoad,f=Object(J.g)(),m=function(){var e=Object(c.useState)(!1),t=Object(r.a)(e,2),n=t[0],a=t[1];return Object(c.useEffect)((function(){(function(){var e=Object(w.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(X.a)("APPS_LEGAL_CONSENT_RECEIVED");case 2:e.sent&&a(!0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),{consentReceived:n,onConsentReceipt:Object(c.useCallback)((function(){a(!0),Object(X.c)("APPS_LEGAL_CONSENT_RECEIVED",!0)}),[])}}(),p=m.consentReceived,b=m.onConsentReceipt;return n?p?"UNKNOWN"!==i&&s?o.a.createElement(re,null,u&&o.a.createElement(ae,null,o.a.createElement(l.Loader,{size:"md"})),o.a.createElement(ne,{frameBorder:"0",id:"iframe-".concat(n.name),ref:t,src:n.url,title:n.name,onLoad:d})):o.a.createElement(ie,{style:{height:"476px"}},o.a.createElement(l.FixedIcon,{type:"notOwner"}),o.a.createElement(l.Title,{size:"xs"},"To use apps, you must be an owner of this Safe")):o.a.createElement(Z,{onCancel:function(){return f.push("".concat(H.c,"/").concat(a,"/balances"))},onConfirm:b}):o.a.createElement("div",null)})),oe=n(109),ue=n(22);function le(){var e=Object(i.a)(["\n  grid-column: 2;\n  grid-row: 2;\n  border-bottom-right-radius: 8px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: white;\n"]);return le=function(){return e},e}function se(){var e=Object(i.a)(["\n  grid-column: 2;\n  border-top-right-radius: 8px;\n  border-bottom-right-radius: 8px;\n  background-color: white;\n"]);return se=function(){return e},e}function de(){var e=Object(i.a)(["\n  grid-column: 1;\n  border-right: solid 2px #e8e7e6;\n  border-top-left-radius: 8px;\n  border-bottom-left-radius: 8px;\n  background-color: white;\n  overflow-y: auto;\n\n  ::-webkit-scrollbar {\n    width: 0.7em !important;\n    scroll-behavior: smooth !important;\n  }\n\n  ::-webkit-scrollbar-track {\n    -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3) !important;\n  }\n\n  ::-webkit-scrollbar-thumb {\n    background-color: darkgrey !important;\n    outline: 1px solid slategrey !important;\n    border-radius: 10px !important;\n  }\n"]);return de=function(){return e},e}function fe(){var e=Object(i.a)(["\n  grid-column: 1/3;\n  grid-row: 1;\n  margin: 0;\n  padding: 16px 0;\n  box-sizing: border-box;\n  display: flex;\n  justify-content: flex-end;\n"]);return fe=function(){return e},e}function me(){var e=Object(i.a)(["\n  display: grid;\n  grid-template-columns: 245px auto;\n  min-height: 75vh;\n  .background {\n    box-shadow: 1px 2px 10px 0 rgba(212, 212, 211, 0.59);\n    background-color: white;\n  }\n"]);return me=function(){return e},e}var pe=d.default.div(me()),be=d.default.div(fe()),ve=d.default.div.attrs((function(){return{className:"background"}}))(de()),ge=d.default.div.attrs((function(){return{className:"background"}}))(se()),Ee=d.default.div.attrs((function(){return{className:"background"}}))(le()),he=n(17),Oe=n(76),je=n.n(Oe),xe=n(6),we=n(3),Se=function(){var e;return{menuOption:(e={alignItems:"center",borderRight:"solid 1px ".concat(we.border),boxSizing:"border-box",cursor:"pointer",flexGrow:"1",flexShrink:"1",fontSize:"13px",justifyContent:"center",lineHeight:"1.2",minWidth:"0",padding:"".concat(we.md," ").concat(we.sm),width:"100%"},Object(xe.a)(e,"@media (min-width: ".concat(we.screenSm,"px)"),{borderRight:"none",flexGrow:"0",fontSize:we.largeFontSize,justifyContent:"flex-start",padding:"".concat(we.md," 0 ").concat(we.md," ").concat(we.md)}),Object(xe.a)(e,"&:last-of-type",{borderRight:"none"}),Object(xe.a)(e,"&:first-child",{borderTopLeftRadius:we.sm}),Object(xe.a)(e,"& svg",Object(xe.a)({display:"block",marginRight:we.xs,maxWidth:"16px"},"@media (min-width: ".concat(we.screenSm,"px)"),{marginRight:we.sm})),Object(xe.a)(e,"& .fill",{fill:we.fontColor}),e),active:{backgroundColor:we.background,color:we.secondary,fontWeight:we.bolderFont,"& .fill":{fill:we.secondary}}}};function Ae(){var e=Object(i.a)(["\n  width: 20px;\n  margin-right: 10px;\n"]);return Ae=function(){return e},e}function ke(){var e=Object(i.a)(["\n  border-bottom: solid 2px rgb(232, 231, 230);\n\n  &:last-child {\n    border-bottom: none;\n  }\n\n  .container {\n    display: flex;\n    align-items: flex-end;\n  }\n"]);return ke=function(){return e},e}function ye(){var e=Object(i.a)([""]);return ye=function(){return e},e}var Te=d.default.div(ye()),Ce=d.default.div(ke()),Ie=d.default.img(Ae()),Ne=Object(he.a)(Se)((function(e){var t=e.activeItem,n=e.classes,a=e.items,r=e.onItemClick;return o.a.createElement(Te,null,a.map((function(e){return o.a.createElement(Ce,{className:je()(n.menuOption,t===e.id&&n.active),key:e.id,onClick:function(){return r(e.id)}},o.a.createElement("div",{className:"container"},e.iconUrl&&o.a.createElement(Ie,{alt:e.name,src:e.iconUrl}),o.a.createElement("span",null,e.name)))})))})),Re=Object(f.a)(Object(f.a)({},a),{},{List:Ne}),Le=n(375),_e=n(38),De=n(442),Me=n(24),Fe=Object(ue.j)(),Ge=n(2279),Pe=n(2482),Ue=n(2484),ze=n(71);function Be(){var e=Object(i.a)(["\n  padding: 10px;\n  word-wrap: break-word;\n  border: solid 2px ",";\n"]);return Be=function(){return e},e}var Ke=d.default.p(Be(),we.border),We=function(e){var t=e.children,n=Object(ze.a)(e,["children"]);return o.a.createElement(Ke,n,t)},qe=n(69);function Ve(){var e=Object(i.a)(["\n  display: flex;\n  align-items: center;\n"]);return Ve=function(){return e},e}function Ye(){var e=Object(i.a)(["\n  width: 20px;\n  margin-right: 10px;\n"]);return Ye=function(){return e},e}function Je(){var e=Object(i.a)(["\n  && {\n    font-size: ",";\n  }\n"]);return Je=function(){return e},e}var He=Object(d.default)(qe.a)(Je(),we.lg),Xe=d.default.img(Ye()),Ze=d.default.div(Ve()),$e=function(e){var t=e.iconUrl,n=e.title;return o.a.createElement(Ze,null,t&&o.a.createElement(Xe,{alt:n,src:t}),o.a.createElement(He,{noMargin:!0,weight:"bolder"},n))},Qe=n(2273),et=n(2294),tt=n(239),nt=n(490),at=n(2292),rt=n(200),it=n(93),ct=[{type:"function",name:"multiSend",constant:!1,payable:!1,stateMutability:"nonpayable",inputs:[{type:"bytes",name:"transactions"}],outputs:[]}],ot=function(e){var t=Object(Me.h)(),n=new t.eth.Contract(ct,rt.b),a=e.map((function(e){return[t.eth.abi.encodeParameter("uint8",0).slice(-2),t.eth.abi.encodeParameter("address",e.to).slice(-40),t.eth.abi.encodeParameter("uint256",e.value).slice(-64),t.eth.abi.encodeParameter("uint256",t.utils.hexToBytes(e.data).length).slice(-64),e.data.replace(/^0x/,"")].join("")})).join("");return n.methods.multiSend("0x".concat(a)).encodeABI()},ut=n(2286),lt=n(693),st=n.n(lt),dt=n(692),ft=n.n(dt);function mt(){var e=Object(i.a)(["\n  display: flex;\n  align-items: center;\n"]);return mt=function(){return e},e}var pt=d.default.div(mt()),bt={marginRight:"5px"},vt=function(e){var t=e.appEstimation,n=e.internalEstimation;if(e.loading)return o.a.createElement("p",null,"Checking transaction parameters...");var a=null;return t>=n&&(a=o.a.createElement(o.a.Fragment,null,o.a.createElement(F.a,{alt:"Success",src:st.a,style:bt})," Gas estimation is OK")),0===n&&(a=o.a.createElement(o.a.Fragment,null,o.a.createElement(F.a,{alt:"Warning",src:ft.a,style:bt})," Error while estimating gas. The transaction may fail.")),o.a.createElement(pt,null,a)};function gt(){var e=Object(i.a)(["\n  max-width: 444px;\n"]);return gt=function(){return e},e}function Et(){var e=Object(i.a)(["\n  display: flex;\n  align-items: center;\n\n  span {\n    margin-right: 4px;\n  }\n"]);return Et=function(){return e},e}function ht(){var e=Object(i.a)(["\n  padding: 15px 0;\n\n  .section {\n    margin-bottom: 15px;\n  }\n\n  .value-section {\n    display: flex;\n    align-items: center;\n  }\n"]);return ht=function(){return e},e}function Ot(){var e=Object(i.a)(["\n  margin-bottom: 15px;\n"]);return Ot=function(){return e},e}var jt=d.default.div(Ot()),xt=d.default.div(ht()),wt=d.default.div(Et()),St=Object(d.default)(We)(gt()),At=Object(ue.i)().nativeCoin,kt=function(e){var t=e.isOpen,n=e.app,a=e.txs,i=e.safeAddress,u=e.ethBalance,d=e.safeName,f=e.params,m=e.onUserConfirm,p=e.onClose,b=e.onTxReject,g=Object(c.useState)(0),E=Object(r.a)(g,2),h=E[0],O=E[1],j=Object(c.useState)(!1),S=Object(r.a)(j,2),A=S[0],k=S[1];Object(c.useEffect)((function(){var e=function(){var e=Object(w.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,k(!0),e.next=4,Object(ut.a)(void 0,i,ot(a),rt.b,"0",it.b);case 4:t=e.sent,O(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:return e.prev=11,k(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(){return e.apply(this,arguments)}}();(null===f||void 0===f?void 0:f.safeTxGas)&&e()}),[f,i,a]);var y=Object(s.e)();if(!t)return null;var T=function(){b(),p()},C=function(e){m(e),p()},I=function(){var e=Object(w.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ot(a),e.next=3,y(Object(at.a)({safeAddress:i,to:rt.b,valueInWei:"0",txData:t,operation:it.b,notifiedTransaction:it.d.STANDARD_TX,origin:n.id,navigateToTransactionsTab:!1,safeTxGas:Math.max((null===f||void 0===f?void 0:f.safeTxGas)||0,h)},C,T));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=a.some((function(e){return!function(e){return!!["string","number"].includes(typeof e.value)&&(!("string"===typeof e.value&&!/^(0x)?[0-9a-f]+$/i.test(e.value))&&(void 0===Object(v.f)(e.to)&&!!e.data&&"string"===typeof e.data))}(e)})),R=N?o.a.createElement(o.a.Fragment,null,o.a.createElement(wt,null,o.a.createElement(l.Icon,{color:"error",size:"md",type:"info"}),o.a.createElement(l.Title,{size:"xs"},"Transaction error")),o.a.createElement(l.Text,{size:"lg"},"This Safe App initiated a transaction which cannot be processed. Please get in touch with the developer of this Safe App for more information.")):o.a.createElement(o.a.Fragment,null,o.a.createElement(Ge.a,{ethBalance:u,safeAddress:i,safeName:d}),o.a.createElement(Pe.a,{withArrow:!0}),a.map((function(e,t){return o.a.createElement(jt,{key:t},o.a.createElement(Ue.a,{description:o.a.createElement(Ge.a,{safeAddress:e.to}),title:"Transaction ".concat(t+1)},o.a.createElement(xt,null,o.a.createElement("div",{className:"section"},o.a.createElement(et.a,{tag:"h3"},"Value"),o.a.createElement("div",{className:"value-section"},o.a.createElement(F.a,{alt:"Ether",height:40,src:Object(tt.b)("0").logoUri}),o.a.createElement(Qe.a,null,Object(nt.a)(e.value,At.decimals)," ",At.name))),o.a.createElement("div",{className:"section"},o.a.createElement(et.a,{tag:"h3"},"Data (hex encoded)*"),o.a.createElement(St,null,e.data)))))})),o.a.createElement(Pe.a,{withArrow:!1}),(null===f||void 0===f?void 0:f.safeTxGas)&&o.a.createElement("div",{className:"section"},o.a.createElement(et.a,{tag:"h3"},"SafeTxGas"),o.a.createElement(St,null,null===f||void 0===f?void 0:f.safeTxGas),o.a.createElement(vt,{appEstimation:f.safeTxGas,internalEstimation:h,loading:A})));return o.a.createElement(l.GenericModal,{title:o.a.createElement($e,{title:n.name,iconUrl:n.iconUrl}),body:R,footer:o.a.createElement(l.ModalFooterConfirmation,{cancelText:"Cancel",handleCancel:T,handleOk:I,okDisabled:N,okText:"Submit"}),onClose:T})},yt=n(223);function Tt(){var e=Object(i.a)(["\n  ",";\n  margin-top: 16px;\n"]);return Tt=function(){return e},e}function Ct(){var e=Object(i.a)(["\n  margin-bottom: 24px;\n  ",";\n"]);return Ct=function(){return e},e}function It(){var e=Object(i.a)(["\n  width: 100%;\n  height: 100%;\n  ",";\n"]);return It=function(){return e},e}function Nt(){var e=Object(i.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]);return Nt=function(){return e},e}var Rt=Object(d.css)(Nt()),Lt=d.default.div(It(),Rt),_t=Object(d.default)(l.Card)(Ct(),Rt),Dt=d.default.div(Tt(),Rt),Mt={isOpen:!1,txs:[],requestId:void 0,params:void 0},Ft=Object(ue.j)();t.default=function(){var e=function(){var e=Object(c.useState)([]),t=Object(r.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(!0),o=Object(r.a)(i,2),u=o[0],l=o[1];Object(c.useEffect)((function(){(function(){var e=Object(w.a)(x.a.mark((function e(){var t,n,r,i,c,o;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(X.a)("APPS_STORAGE_KEY");case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:t=e.t0,n=t.map((function(e){return Object(f.a)(Object(f.a)({},e),{},{isDeletable:!0})})),A.e.forEach((function(e){var t=n.find((function(t){return t.url===e.url}));t?(t.isDeletable=!1,t.networks=e.networks):n.push(Object(f.a)(Object(f.a)({},e),{},{isDeletable:!1}))})),n=n.filter((function(e){return!e.networks||e.networks.includes(Object(ue.h)())})),r=[],i=0;case 11:if(!(i<n.length)){e.next=30;break}return e.prev=12,c=n[i],e.next=16,Object(A.b)(c.url);case 16:if(!(o=e.sent).error){e.next=19;break}throw Error("There was a problem trying to load app ".concat(c.url));case 19:o.disabled=Boolean(c.disabled),o.isDeletable=void 0===Boolean(c.isDeletable)||c.isDeletable,r.push(o),e.next=27;break;case 24:e.prev=24,e.t1=e.catch(12),console.error(e.t1);case 27:i++,e.next=11;break;case 30:r=r.sort((function(e,t){return e.name.localeCompare(t.name)})),a(r),l(!1);case 33:case"end":return e.stop()}}),e,null,[[12,24]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var s=Object(c.useCallback)(function(){var e=Object(w.a)(x.a.mark((function e(t,r){var i,c,o;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Object(oe.a)(n),c=i.find((function(e){return e.id===t}))){e.next=4;break}return e.abrupt("return");case 4:c.disabled=!r,a(i),o=i.map((function(e){return{url:e.url,disabled:e.disabled}})),Object(X.c)("APPS_STORAGE_KEY",o);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[n]),d=Object(c.useCallback)((function(e){var t=[{url:e.url,disabled:!1}].concat(Object(oe.a)(n.map((function(e){return{url:e.url,disabled:e.disabled}}))));Object(X.c)("APPS_STORAGE_KEY",t),a([].concat(Object(oe.a)(n),[Object(f.a)(Object(f.a)({},e),{},{isDeletable:!0})]))}),[n]),m=Object(c.useCallback)((function(e){var t=n.filter((function(t){return t.id!==e}));a(t);var r=t.map((function(e){return{url:e.url,disabled:e.disabled}}));Object(X.c)("APPS_STORAGE_KEY",r)}),[n]);return{appList:n,loadingAppList:u,onAppToggle:s,onAppAdded:d,onAppRemoved:m}}(),t=e.appList,n=e.loadingAppList,a=e.onAppToggle,i=e.onAppAdded,d=e.onAppRemoved,m=Object(c.useState)(!0),p=Object(r.a)(m,2),b=p[0],v=p[1],g=Object(c.useState)(),E=Object(r.a)(g,2),h=E[0],O=E[1],j=Object(c.useState)(Mt),S=Object(r.a)(j,2),k=S[0],y=S[1],T=Object(c.useRef)(null),C=Object(yt.c)().trackEvent,I=Object(s.f)(Le.b),N=Object(s.f)(_e.x),R=Object(s.f)(_e.s),L=Object(s.f)(_e.o),_=Object(c.useCallback)((function(e,t,n){return y({isOpen:!0,txs:e,requestId:n,params:t})}),[y]),D=Object(c.useCallback)((function(){return y(Mt)}),[y]),M=Object(c.useMemo)((function(){return t.find((function(e){return e.id===h}))}),[t,h]),F=Object(c.useMemo)((function(){return t.filter((function(e){return!e.disabled}))}),[t]),G=function(e,t,n,a){var r=Object(De.useSnackbar)(),i=r.enqueueSnackbar,o=r.closeSnackbar,l=Object(s.f)(_e.s),d=Object(s.f)(_e.x),m=Object(s.f)(_e.o),p=Object(s.e)(),b=Object(c.useCallback)((function(t,n){var r,i,c=Object(f.a)(Object(f.a)({},t),{},{requestId:n||Math.trunc(window.performance.now())});a&&e&&(null===(r=a.current)||void 0===r||null===(i=r.contentWindow)||void 0===i||i.postMessage(c,e.url))}),[a,e]);return Object(c.useEffect)((function(){var n=function(e,n,a){if(e)switch(e){case u.SDK_MESSAGES.SEND_TRANSACTIONS:n&&t(n,void 0,a);break;case u.SDK_MESSAGES.SEND_TRANSACTIONS_V2:var r=n;r&&t(r.txs,r.params,a);break;case u.SDK_MESSAGES.RPC_CALL:var i,c,o=n;if(null!==Me.k.currentProvider&&"string"!==typeof Me.k.currentProvider&&"send"in Me.k.currentProvider)null===(i=Me.k.currentProvider)||void 0===i||null===(c=i.send)||void 0===c||c.call(i,{jsonrpc:"2.0",method:null===o||void 0===o?void 0:o.call,params:null===o||void 0===o?void 0:o.params,id:"1"},(function(e,t){if(!e){var n={messageId:u.INTERFACE_MESSAGES.RPC_CALL_RESPONSE,data:t};b(n,a)}}));break;case u.SDK_MESSAGES.SAFE_APP_SDK_INITIALIZED:var l={messageId:u.INTERFACE_MESSAGES.ON_SAFE_INFO,data:{safeAddress:d,network:Fe.toLowerCase(),ethBalance:m}},s={messageId:u.INTERFACE_MESSAGES.ENV_INFO,data:{txServiceUrl:Object(ue.n)()}};b(l),b(s);break;default:console.error("ThirdPartyApp: A message was received with an unknown message id ".concat(e,"."))}else console.error("ThirdPartyApp: A message was received without message id.")},a=function(){var t=Object(w.a)(x.a.mark((function t(a){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.origin!==window.origin){t.next=2;break}return t.abrupt("return");case 2:if(null===e||void 0===e?void 0:e.url.includes(a.origin)){t.next=5;break}return console.error("ThirdPartyApp: A message was received from an unknown origin ".concat(a.origin)),t.abrupt("return");case 5:n(a.data.messageId,a.data.data,a.data.requestId);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return window.addEventListener("message",a),function(){window.removeEventListener("message",a)}}),[n,o,p,i,m,t,d,l,e,b]),{sendMessageToIframe:b}}(M,_,D,T).sendMessageToIframe,P=Object(c.useCallback)((function(e){h!==e&&(v(!0),O(e))}),[h]);Object(c.useEffect)((function(){var e=t.length&&!h,n=null===M||void 0===M?void 0:M.disabled;(e||n)&&function(){var e=t.find((function(e){return!e.disabled}));e&&O(e.id)}()}),[t,M,h,C]),Object(c.useEffect)((function(){M&&C({category:yt.a,action:"Apps",label:M.name})}),[M,C]);var U=Object(c.useCallback)((function(){var e=T.current;e&&M&&function(e,t){try{var n=new URL(e),a=new URL(t);return n.href===a.href}catch(r){return!1}}(e.src,M.url)&&(v(!1),G({messageId:u.INTERFACE_MESSAGES.ON_SAFE_INFO,data:{safeAddress:N,network:Ft.toLowerCase(),ethBalance:L}}))}),[L,N,M,G]);return!n&&t.length&&N?o.a.createElement(o.a.Fragment,null,o.a.createElement(l.Menu,null,o.a.createElement(Y,{appList:t,onAppAdded:i,onAppToggle:a,onAppRemoved:d})),F.length?o.a.createElement(Re.Wrapper,null,o.a.createElement(Re.Menu,null,o.a.createElement(Re.List,{activeItem:h,items:F,onItemClick:P})),o.a.createElement(Re.Content,null,o.a.createElement(ce,{ref:T,granted:I,selectedApp:M,safeAddress:N,network:Ft,appIsLoading:b,onIframeLoad:U}))):o.a.createElement(_t,null,o.a.createElement(l.Title,{size:"xs"},"No Apps Enabled")),o.a.createElement(Dt,null,o.a.createElement(l.IconText,{color:"secondary",iconSize:"sm",iconType:"info",text:" These are third-party apps, which means they are not owned, controlled, maintained or audited by Gnosis. Interacting with the apps is at your own risk. Any communication within the Apps is for informational purposes only and must not be construed as investment advice to engage in any transaction.",textSize:"sm"})),o.a.createElement(kt,{isOpen:k.isOpen,app:M,safeAddress:N,ethBalance:L,safeName:R,txs:k.txs,onClose:D,onUserConfirm:function(e){G({messageId:u.INTERFACE_MESSAGES.TRANSACTION_CONFIRMED,data:{safeTxHash:e}},k.requestId)},params:k.params,onTxReject:function(){G({messageId:u.INTERFACE_MESSAGES.TRANSACTION_REJECTED,data:{}},k.requestId)}})):o.a.createElement(Lt,null,o.a.createElement(l.Loader,{size:"md"}))}}}]);
//# sourceMappingURL=39.259631c0.chunk.js.map